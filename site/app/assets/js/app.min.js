"use strict";var directives=angular.module("directives",["ngRoute"]);directives.directive("analytics",["servicesConfig",function(servicesConfig){return{restrict:"A",link:function(){servicesConfig.analitics&&(!function(i,s,o,g,r,a,m){i.GoogleAnalyticsObject=r,i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date,a=s.createElement(o),m=s.getElementsByTagName(o)[0],a.async=1,a.src=g,m.parentNode.insertBefore(a,m)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create",servicesConfig.analitics,"auto"))}}}]),directives.directive("moodyClick",["$parse",function($parse){var directiveDefinitionObject={priority:0,replace:!1,transclude:!1,restrict:"A",link:function(scope,iElement,iAttrs){var fn=$parse(iAttrs.moodyClick);iElement.bind("click",function(){scope.$apply(function(){var ok=fn(scope,{});ok||$(iElement).effect("shake",{times:3,distance:8},1e3)})})}};return directiveDefinitionObject}]),directives.directive("loadIframe",["$timeout","$rootScope","defaultServices","$localStorage","$http",function($timeout,$rootScope,defaultServices,$localStorage,$http){var directiveDefinitionObject={restrict:"A",replace:!0,scope:{loadIframe:"="},link:function($scope,iElement){$scope.content=$scope.loadIframe,$rootScope.mainMsgs=defaultServices.msgload,$(iElement).height(1e3),$http({method:"GET",url:$scope.content.url}).success(function(){$rootScope.mainMsgs="",$(iElement).attr("src",$scope.content.url)}).error(function(){$scope.content.url="",$rootScope.mainMsgs=defaultServices.msgdefault}),iElement.on("load",function(){$timeout(function(){$(iElement).height($localStorage.iframeHeight)},100)})},template:'<iframe width="100%" frameborder="0" id="{{content.name}}" name="{{content.name}}" scrolling="no" height="" ng-class="content.classe" src=""></iframe>'};return directiveDefinitionObject}]),directives.directive("points",["$localStorage","authServices","baseUrls","$rootScope",function($localStorage,authServices,baseUrls,$rootScope){var upadateUser={restrict:"A",transclude:!0,replace:!0,scope:{pointsUser:"="},templateUrl:baseUrls.directorys.templates.app+"points.html",link:function($scope){$scope.$watch("pointsUser",function(){$scope.pageCurrent=$rootScope.pageCurrent,$scope.user=$scope.pointsUser,$localStorage.user||($scope.include="",authServices.logout())})}};return upadateUser}]),directives.directive("messages",["baseUrls","linkLocation",function(baseUrls,linkLocation){return{restrict:"A",transclude:!0,replace:!0,scope:{msgs:"="},templateUrl:baseUrls.directorys.templates.app+"messages.html",link:function($scope,$elm){$scope.addclass=function(status){return"Fail"==status?"alert-danger":"Ok"==status?"alert-success":"alert-warning"},$scope.location=function(btn,form){var scopeRoot="$scope.$parent.$parent.$parent";if(btn.func){var fn=eval(scopeRoot+"."+btn.func);linkLocation.location(btn,fn,form)}else linkLocation.location(btn,scopeRoot,form)}}}}]),directives.directive("breadcrumbResult",["$filter",function($filter){return{restrict:"A",scope:{breadcrumbResult:"=",conditional:"="},link:function($scope){$scope.$watch("conditional",function(){$scope.breadcrumbResult.txt=$scope.breadcrumbResult.txt?$scope.breadcrumbResult.txt:"Resultado Filtrado por:",$scope.breadcrumbResult.breadcrumb.result="";for(var i=0;i<$scope.breadcrumbResult.detail[0].form[0].campos.length;i++){var campo=$scope.breadcrumbResult.detail[0].form[0].campos[i];if(campo.breadcrumb={},"select"==campo.type&&campo.valueOrigin)if("0"==campo.valueOrigin)campo.breadcrumb.text=0;else{var filterOptions=$filter("filter")(campo.options.obj,{id:campo.valueOrigin})[0];campo.breadcrumb.text=filterOptions.description}if(campo.breadcrumb.text){var innerTxtResult="<small>"+campo.labelName+" "+campo.breadcrumb.text+"</small>";$scope.breadcrumbResult.breadcrumb.result!=innerTxtResult&&($scope.breadcrumbResult.breadcrumb.result=$scope.breadcrumbResult.breadcrumb.result+innerTxtResult)}}})}}}]),directives.directive("insertImg",["baseUrls","$rootScope","breakParam",function(baseUrls,$rootScope,breakParam){return{restrict:"A",scope:{insertImg:"=",directoryImg:"=",insertContent:"="},link:function($scope,$elm){var insertImage=function(image){var setimg=angular.isObject(image)?!0:!1,imageInsert=setimg?image[$scope.insertContent.imgset]:image;$scope.directoryImg?$elm.attr("src",baseUrls.directorys.images+imageInsert):$elm.attr("src",imageInsert)};if($scope.insertImg)if($scope.insertImg.parameterclicked){if($scope.insertImg.parameter)var parameter=$scope.insertImg.parameter;var filter=breakParam.breaks($rootScope.objClicked,[parameter]);insertImage(filter)}else insertImage($scope.insertImg)}}}]),directives.directive("btnRedirectExternal",["defaultServices",function(defaultServices){return{restrict:"A",scope:{btnRedirectExternal:"=",btnRedirectContent:"="},link:function($scope,$elm){$scope.btnRedirectExternal.urlexternal&&$scope.$watch("btnRedirectContent.result",function(){$scope.btnRedirectContent.result&&defaultServices.fieldSet($scope.btnRedirectContent.result,function(data){data.name==$scope.btnRedirectExternal.setReturnUrl&&angular.element($elm).attr({href:data.value,target:"_blank"})})})}}}]),directives.directive("formatMoeda",["formatField","$filter",function(formatField){return{restrict:"A",scope:{formatMoeda:"=",serviceForm:"="},link:function($scope,$elm){$scope.content=$scope.formatMoeda;var format=function(){var val=formatField.moeda($scope.content.lineValue);$scope.content.lineValue=val};if($scope.content.service&&$scope.content.service.events)for(var i=0;i<$scope.content.service.events.length;i++){var eventService=$scope.content.service.events[i];$elm.bind(eventService.event,function(){callServiceField.callService(eventService,$scope.serviceForm)})}$scope.content.lineValue.length>0&&format(),$scope.$watch("formatMoeda.lineValue",function(){$scope.content.formatreload&&format()}),$elm.bind("focusout keyup",function(){var val=formatField.moeda($(this).val());$scope.$apply(function(){$scope.content.lineValue=val})})}}}]),directives.directive("linkBind",["$timeout","$rootScope","linkLocation","breakParam","redirect","formatField",function($timeout,$rootScope,linkLocation,breakParam,redirect,formatField){return{restrict:"A",scope:{linkBind:"="},link:function($scope,$elm,$attr){var linkBindReload=!1,bindResult,clickEvent=function(elm){$timeout(function(){$scope.$apply(function(){$("a",elm).bind("click",function(e){"{"==$(this).attr("href")[0]&&(e.preventDefault(),linkLocation.location(this,$scope))})})},100)},typeParameter=function(type,val){type=type.split(")")[0];var fn=eval("formatField."+type);return fn(val)};$scope.$watch($rootScope,function(){if($scope.linkBind){var matches=$scope.linkBind.match(/{{[^}]*}}/g),parameterOrigin,matchInit;if(matches)for(var fn,match,multipleMatch,result,i=0;i<matches.length;i++){if(match=matches[i].replace("{{",""),match=match.replace("}}",""),matchInit=match,multipleMatch=match.split(", "),match=multipleMatch[0],multipleMatch[1]){var matchRoot=match.split("."),splitMatch=matchRoot[0].split(" ("),fnMultiple=eval(splitMatch[0]),filterRoot=breakParam.breaks(fnMultiple,[matchRoot[1]])[0];if(filterRoot){var splitMatch=match.split(" ("),typeMatch;match=splitMatch[0],fn=filterRoot[0].value,splitMatch[1]&&(fn=typeParameter(splitMatch[1],fn))}else redirect.url(multipleMatch[2])}else{var splitMatch=match.split(" ("),typeMatch;match=splitMatch[0],fn=eval(match),fn=fn?fn:"",splitMatch[1]&&(fn=typeParameter(splitMatch[1],fn))}$scope.linkBind=$scope.linkBind.replace(matches[i],'<span class="bindHtml" title="'+matchInit+'">'+fn+"</span>")}else{var bindHtml=angular.element($elm).children(".bindHtml");$(bindHtml).each(function(){var parameter=$(".bindHtml",this).attr("title");if(parameter){var splitMatch=parameter.split(" ("),typeMatch;parameter=splitMatch[0],matchInit=parameter,fn=eval(parameter),fn=fn?fn:"",splitMatch[1]&&(fn=typeParameter(splitMatch[1],fn)),fn&&$(this).html('<span class="bindHtml" title="'+parameter+'">'+fn+"</span>")}})}clickEvent(angular.element($elm)[0])}})}}}]),directives.directive("tplInsert",["$rootScope","baseUrls","linkLocation","breakParam","defaultServices","resultScope","activeNavigation","$filter","$timeout","urlSetParameter",function($rootScope,baseUrls,linkLocation,breakParam,defaultServices,resultScope,activeNavigation,$filter,$timeout,urlSetParameter){return{restrict:"A",replace:!0,scope:{tplInsert:"=",tplConditional:"=",tplInsertAddfilter:"="},link:function($scope,$elm,$attr){var callTpl=function(data){if(data&&($scope.content.conditional=data.result),"tpl-pag-table"==$scope.content.tpl&&$scope.content.footer&&$scope.content.footer.pagination){var contentPagitantion=$scope.content.footer.pagination;contentPagitantion.form={},contentPagitantion.form.table=$scope.content.table,contentPagitantion.form.table.isPagination=!0,contentPagitantion.form.table.pagination={totalItems:contentPagitantion.qtdLines,url:contentPagitantion.url,maxSize:contentPagitantion.btnPagesView,boundaryLinks:contentPagitantion.firstLastLink,directionLinks:contentPagitantion.directionLinks,numPagesText:contentPagitantion.numPagesTextHidden?"":"Total: ",previoustext:contentPagitantion.previoustext?contentPagitantion.previoustext:"Voltar",nexttext:contentPagitantion.nexttext?contentPagitantion.nexttext:"Avançar",firsttext:contentPagitantion.firsttext?contentPagitantion.firsttext:"Primeira",lasttext:contentPagitantion.lasttext?contentPagitantion.lasttext:"Última"},contentPagitantion.form.table.page={url:contentPagitantion.url,totalItems:contentPagitantion.qtdLines}}$scope.tplConditional?($scope.contentTpl="",$scope.$watch("tplConditional",function(){$scope.$watch("tplConditional.conditional",function(){$scope.contentTpl="",$timeout(function(){$scope.tplConditional.conditional&&($scope.content.conditional=$scope.tplConditional.conditional,$scope.contentTpl=$scope.content.tpl?baseUrls.directorys.templates.app+$scope.content.tpl+".html":""),$scope.content.form&&$scope.content.form.table&&$scope.content.form.table.isPagination&&($scope.content.tpl="tpl-pagination")},300)})})):$scope.contentTpl=$scope.content.tpl?baseUrls.directorys.templates.app+$scope.content.tpl+".html":""};if($scope.tplInsert.insertpartials)if($scope.tplInsert.insertpartials.tplConditional){for(var tplConditional=$scope.tplInsert.insertpartials.tplConditional,tplInsert,validParams=function(paramConditional,arrayCheckedParams){var condSetparameterurl=urlSetParameter.parameter(paramConditional.param);condSetparameterurl=void 0==condSetparameterurl?0:condSetparameterurl,condSetparameterurl&&condSetparameterurl==paramConditional.val&&arrayCheckedParams.push("ok")},i=0;i<tplConditional.tplConds.length;i++){for(var cond=tplConditional.tplConds[i],checkedParams=[],k=0;k<cond.conds.length;k++){var condTpl=cond.conds[k];cond.parameterurl&&(0==k?validParams(condTpl,checkedParams):checkedParams.length==k&&validParams(condTpl,checkedParams))}checkedParams.length==cond.conds.length&&(tplInsert=breakParam.breaks($rootScope.site.layout.partials,[cond.tpl])[0])}$scope.content=tplInsert?tplInsert:breakParam.breaks($rootScope.site.layout.partials,[tplConditional.defaultTpl])[0]}else $scope.content=breakParam.breaks($rootScope.site.layout.partials,$scope.tplInsert.insertpartials)[0];else $scope.content=$scope.tplInsert;if($scope.tplInsertAddfilter&&($scope.content.headerFilter=$scope.tplInsertAddfilter),("tpl-box"==$scope.content.tpl||"tpl-inner"==$scope.content.tpl)&&($scope.content.insertTplContent=baseUrls.directorys.templates.app+$scope.content.tplContent+".html"),"tpl-page-external"==$scope.content.tpl&&($scope.content.insertTplContent=baseUrls.directorys.templates.external+$scope.content.tplContent+".html"),$scope.activeNav=function(nav){return activeNavigation.active(nav)},$scope.content.service)if($scope.content.service.call){var elmMainApp=$($elm[0]).closest("#mainApp");elmMainApp&&!$scope.content.modal&&($rootScope.mainMsgs=defaultServices.msgload);var fn=eval("defaultServices."+$scope.content.service.call.objresult);fn($scope.content,function(data){data.detail||resultScope.format(data.result,data),elmMainApp&&($rootScope.mainMsgs=""),!elmMainApp||$scope.content.modal||$rootScope.mainMsgs.keep||data.msgs&&"Fail"==data.msgs.response.status&&($scope.content.msgs=data.msgs),callTpl(data)})}else callTpl();else callTpl();if($scope.content.parameter)if($scope.content.parameterclicked&&$rootScope.objClicked){var filter=$filter("filter")($rootScope.objClicked,$scope.content.parameter,!0)[0];filter?$scope.content.lineValue=filter.value:""}else $scope.content.lineValue=breakParam.breaks($rootScope.user,[$scope.content.parameter])[0];$scope.location=function(btn,form){var scopeRoot=".$parent.$parent.$parent";if(btn.func){var fn=eval("$scope"+scopeRoot+"."+btn.func);fn=fn?fn:eval("$scope"+scopeRoot+scopeRoot+"."+btn.func),linkLocation.location(btn,fn,form)}else btn.reloadForm?linkLocation.location(btn,"$scope"+scopeRoot,$scope.editField,function(data){$scope.$apply(function(){$scope.editField=data.form})}):linkLocation.location(btn,"$scope"+scopeRoot,form)},$scope.content.dataUpdate=1,$scope.insertField=function(field){return baseUrls.directorys.templates.app+"tpl-"+field.nameTpl+".html"}},template:'<div ng-include="contentTpl" ng-class="content.classe"></div>'}}]),directives.directive("insertField",["baseUrls","$rootScope","$filter","resultScope","linkLocation","breakParam","interactionField","$timeout","defaultServices",function(baseUrls,$rootScope,$filter,resultScope,linkLocation,breakParam,interactionField,$timeout,defaultServices){return{restrict:"A",replace:!0,scope:{insertField:"=",editField:"="},link:function($scope,$elm,$attr){$scope.content=$scope.insertField,$scope.content.noclearvalue||($scope.content.lineValue=""),$scope.content.list&&!$scope.content.type&&($scope.content.type="select",$scope.content.nameTpl="select"),$scope.editField.fieldCallHidden&&($scope.content.defaultHidden=$scope.content.ignoreHidden?!1:!0),$scope.insertCamp=baseUrls.directorys.templates.app+"tpl-"+$scope.insertField.nameTpl+".html","button"==$scope.content.nameTpl&&($scope.location=function(btn,form){var scopeRoot="$scope.$parent";if(btn.func){var fn=eval(scopeRoot+"."+btn.func);linkLocation.location(btn,fn,form)}else btn.reloadForm?linkLocation.location(btn,scopeRoot,$scope.editField,function(data){$scope.$apply(function(){$scope.editField=data.form})}):linkLocation.location(btn,scopeRoot,form)});var hideElement=function(hidden){var line=$(angular.element($elm)[0]).parent().parent()[0],hideElement=hidden,elementInteracion=function(){hidden?$(line).hasClass("box-scroll")&&$(line).removeClass("box-scroll").addClass("hide hide-scroll interaction"):$(line).hasClass("hide-scroll")&&$(line).addClass("box-scroll interaction").removeClass("hide hide-scroll")};if($scope.content.hidden=hideElement,$(line).hasClass("interaction")?elementInteracion():$timeout(function(){elementInteracion()},100),$scope.content.conditionalShow.hide)for(var a=0;a<$scope.content.conditionalShow.hide.length;a++){var fieldHide=$scope.content.conditionalShow.hide[a];defaultServices.loopFiedsForm($scope.editField,function(data){data.name==fieldHide&&(data.defaultHidden=hideElement)})}};$scope.content.conditionalShow&&(!$scope.content[$scope.content.conditionalShow.parameter]&&"lineValue"!=$scope.content.conditionalShow.parameter||"value"!=$scope.content.conditionalShow.parameter&&"lineValue"!=$scope.content.conditionalShow.parameter)&&hideElement(!0),$scope.editField.fieldsInteraction&&$scope.$watch("insertField.lineValue",function(){if(("radio"==$scope.content.type||"checkbox"==$scope.content.type)&&($scope.content.lineValue=$scope.content.lineValue?$scope.content.lineValue:!1),$scope.insertField.interaction)for(var i=0;i<$scope.editField.fieldsInteraction.length;i++){var interaction=$scope.editField.fieldsInteraction[i],campModify=interactionField.interaction($scope.editField,interaction);campModify&&defaultServices.loopFiedsForm($scope.editField,function(data){data.name==campModify.name&&(data=campModify)})}$scope.content.conditionalShow&&hideElement($scope.content.lineValue?!1:!0)});var insertParameter=function(field){angular.forEach(field,function(fieldIndex,fieldVal){var ignore=!1;if($scope.content.ignoreParams)for(var b=0;b<$scope.content.ignoreParams.length;b++){var ignoreParam=$scope.content.ignoreParams[b];(ignoreParam==fieldIndex||"ignoreParams"==fieldIndex)&&(ignore=!0)}ignore||("alias"==fieldIndex?$scope.content.labelName||($scope.content.labelName=fieldIndex):$scope.content[fieldVal]||($scope.content[fieldVal]=fieldIndex))})};if($scope.content.parameter)if($scope.content.captureparameter){if(!$scope.editField.formdisabled){var captureRoot=$rootScope[$scope.content.captureparameter];if(captureRoot)if(captureRoot.length>0){var filter=$filter("filter")(captureRoot,{name:$scope.content.parameter},!0)[0];filter&&($scope.content.lineValue=filter.lineValue?filter.lineValue:filter.value,$scope.content.addParamsResult&&insertParameter(filter))}else $scope.content.lineValue=captureRoot[$scope.content.parameter]?captureRoot[$scope.content.parameter]:captureRoot.lineValue?captureRoot.value:captureRoot.value,$scope.content.addParamsResult&&insertParameter(captureRoot)}}else $scope.content.lineValue=breakParam.breaks($rootScope.user,[$scope.content.parameter])[0];if($rootScope.objClicked){var fieldsHide=$rootScope.objClicked.formFieldHide;if(fieldsHide)for(var i=0;i<fieldsHide.length;i++){var parameterHide=fieldsHide[i];$scope.content.name==parameterHide&&($scope.content.inputHide=!0,$scope.content.labelHide=!0)}if($scope.content.parameterclicked&&!$scope.content.formdisabled)if($scope.content.parameter)if("params"==$scope.content.parameter){var paramArray=$rootScope.objClicked[$scope.content.parameter],filter=$filter("filter")(paramArray,{id:$scope.content.nameparams},!0)[0];filter&&($scope.content.lineValue=filter.lineValue?filter.lineValue:filter.value)}else $scope.content.lineValue=$rootScope.objClicked[$scope.content.parameter];else $scope.content.lineValue=$rootScope.objClicked.lineValue?$rootScope.objClicked.lineValue:$rootScope.objClicked.value}$scope.$watch("editField.formdisabled",function(){var formdisabled=$scope.editField.formdisabled;if(formdisabled){var insertDisabled=function(parameter,rootSearch,value){var filter={},captureRoot=breakParam.breaks($rootScope,[rootSearch])[0];captureRoot?captureRoot.length>0?filter=$filter("filter")(captureRoot,parameter,!0)[0]:angular.forEach(captureRoot,function(index,val){val==parameter&&(filter.name=val,filter.value=index)}):filter=$filter("filter")(rootSearch,parameter,!0)[0],filter&&$scope.content.name==filter.name&&(value&&!$scope.content.disabled?(filter.value?filter.value:0,$scope.content.disabled=filter.value==value?!0:!1):$scope.content.disabled=!0)};if(formdisabled.btns&&$scope.editField.btns&&!$scope.content.defaultHidden)for(var i=0;i<formdisabled.btns.length;i++){var btnDisabled=formdisabled.btns[i];$scope.content.name==btnDisabled.parameter&&$scope.$watch("insertField.lineValue",function(){("radio"==$scope.content.type||"checkbox"==$scope.content.type)&&($scope.content.lineValue=$scope.content.lineValue?$scope.content.lineValue:!1);for(var j=0;j<$scope.editField.btns.length;j++){var btn=$scope.editField.btns[j];btn.name==btnDisabled.name&&(btn.disabled=$scope.content.lineValue==btnDisabled.parametervalue?!0:!1)}})}if(formdisabled.parameters)for(var l=0;l<formdisabled.parameters.length;l++){var parameter=formdisabled.parameters[l];insertDisabled(parameter.name,parameter.captureObj,parameter.value,!0)}else formdisabled.parameterclicked&&$rootScope.objClicked&&insertDisabled(formdisabled.parameter,$rootScope.objClicked,formdisabled.value)}}),$scope.$watch("editField.result",function(){($scope.editField.edit||$scope.editField.result)&&resultScope.format($scope.editField.result,$scope.content,$scope.editField)})},template:'<span ng-include="insertCamp"></span>'}}]),directives.directive("tplPagination",["defaultServices",function(defaultServices){return{restrict:"A",replace:!0,scope:{tplPagination:"="},link:function($scope){$scope.content=$scope.tplPagination,$scope.content.pageChanged=function(){defaultServices.filterTable($scope.content,!0)}}}}]),directives.directive("serviceCall",["callServiceField","$http","$timeout","formatField","$filter","defaultServices",function(callServiceField,$http,$timeout,formatField,$filter,defaultServices){return{restrict:"A",replace:!0,scope:{serviceCall:"=",serviceForm:"="},link:function($scope,$elm){$scope.content=$scope.serviceCall;var fnConditional=function(contentSearch,cond,element,array){if(array)defaultServices.fieldSet(contentSearch,function(data){data.name==cond.name&&disabledBtn(data,cond)});else if("params"==cond.name){var params=contentSearch[cond.name],filter=$filter("filter")(params,{id:cond.paramsName})[0];filter&&disabledBtn(element,cond)}else disabledBtn(element,cond)},disabledBtn=function(btn,cond){btn[cond.events.name]=cond.events.value};if($scope.content.btnConditional){for(var btns=angular.copy($scope.content.btns),i=0;i<btns.length;i++){var btn=btns[i];if(btn.viewsConditional)for(var j=0;j<btn.viewsConditional.length;j++){var conditional=btn.viewsConditional[j];conditional.searchThis?fnConditional($scope.content,conditional,btn):$scope.serviceForm.result&&fnConditional($scope.serviceForm.result,conditional,btn,!0)}}$scope.content.btns=btns}if($scope.content.service&&$scope.content.service.events)for(var i=0;i<$scope.content.service.events.length;i++){var eventService=$scope.content.service.events[i];$elm.bind(eventService.event,function(){callServiceField.callService(eventService,$scope.serviceForm)})}if("radio"==$scope.content.nameTpl&&$scope.$watch("serviceCall.checked",function(){$scope.content.lineValue=$scope.content.checked}),$scope.$watch("serviceCall.lineValue",function(){if($scope.content.clearResult&&!$scope.content.noClearResult)for(var i=0;i<$scope.content.clearResult.length;i++){var fieldClear=$scope.content.clearResult[i];defaultServices.loopFiedsForm($scope.serviceForm,function(data){if(data.name==fieldClear)switch(data.value="",data.type){case"radio":data.lineValue=!1,data.checked=!1;break;case"checkbox":data.lineValue=!1,data.checked=!1;break;default:data.lineValue=""}})}if($scope.content.lineValue){if($scope.content.lineValue.length>0)switch($scope.content.type){case"pontos":$scope.content.lineValue=formatField.pontos($scope.content.lineValue);break;case"moeda":$scope.content.lineValue=formatField.moeda($scope.content.lineValue,$scope.content.symbol);break;case"date":$scope.content.lineValue=formatField.date($scope.content.lineValue);break;default:$scope.content.lineValue=formatField.olds($scope.content.lineValue,$scope.content.type)}}else $scope.content.value&&($scope.content.lineValue=$scope.content.value);if(isIE()&&("date"==$scope.content.type&&Modernizr.load({test:Modernizr.inputtypes.date,complete:function(){"input"==$scope.content.nameTpl&&($($elm).datepicker({dateFormat:"dd/mm/yy",dayNames:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],dayNamesMin:["D","S","T","Q","Q","S","S","D"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb","Dom"],monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],nextText:"Pro",prevText:"Ant"}),$($elm).on("keydown",function(e){e.preventDefault()}))}}),$scope.content.placeholder&&isIE()<=9&&($($elm).parent().css({position:"relative"}),$($elm).before('<span class="placeholderIE">'+$scope.content.placeholder+"</span>"),$scope.content.lineValue.length>0))){var contentPlaceholder=$($elm).parent(),placeholderIE=$(".placeholderIE",contentPlaceholder);placeholderIE.hide()}$scope.serviceForm.dataUpdate?$scope.serviceForm.dataUpdate++:""}),$scope.content.placeholder&&isIE()<=9){var contentPlaceholder=$($elm).parent();$(contentPlaceholder).bind("click",".placeholderIE",function(){$elm[0].focus()})}if($elm.bind("focusout",function(){if($scope.content.compareField){var fieldCompare=$scope.content.compareField;defaultServices.loopFiedsForm($scope.serviceForm,function(data){fieldCompare==data.name&&$scope.$apply(function(){$scope.content.lineValue!=data.lineValue&&($scope.content.invalid=!0,$scope.content.lineValue="")})})}isIE()&&"date"==$scope.content.type&&$timeout(function(){$scope.content.lineValue=$($elm).val()},200)}),$elm.bind("keyup",function(){if(("number"==$scope.content.type||"pontos"==$scope.content.type)&&$scope.content.lineValue){var maxlengthVal=$scope.content.lineValue.length-1;Number($scope.content.lineValue)||"0"==$scope.content.lineValue[maxlengthVal]?(angular.element($elm).removeClass("ng-invalid ng-invalid-required"),$scope.content.maxlength&&$scope.content.lineValue.length>$scope.content.maxlength&&$scope.$apply(function(){$scope.content.lineValue=$scope.content.lineValue.slice(0,$scope.content.maxlength)})):$scope.$apply(function(){$scope.content.lineValue=$scope.content.lineValue.slice(0,maxlengthVal)})}}),$scope.content.autocomplete){var opts,autocomplete=$scope.content.autocomplete,initOpts=function(){if(opts={},autocomplete.options){if(autocomplete.options.types){opts.types=[];for(var typesBreak=autocomplete.options.types.split(", "),i=0;i<typesBreak.length;i++)opts.types.push(typesBreak[i])}autocomplete.options.bounds&&(opts.bounds=autocomplete.options.bounds),autocomplete.options.country&&(opts.componentRestrictions={country:autocomplete.options.country})}};initOpts();$scope.watchOptions=function(){return autocomplete.options},$scope.$watch($scope.watchOptions,function(){initOpts()},!0)}}}}]),directives.directive("insertFormOfPartial",["$rootScope","breakParam","urlSetParameter",function($rootScope,breakParam){return{restrict:"A",link:function($scope){if($scope.fields&&$scope.fields.insertpartials&&($scope.fields.form=breakParam.breaks($rootScope.site.layout.partials,$scope.fields.insertpartials)[0],$scope.fields.aditionals)){var lineAdd=$scope.fields.aditionals.line,disabledFiel=$scope.fields.aditionals.disabled;if(lineAdd||disabledFiel)for(var i=0;i<$scope.fields.form.length;i++){var line=$scope.fields.form[i];lineAdd[i]&&(line.style=line.style+" "+lineAdd[i].style)}}}}}]),directives.directive("formatDate",["formatField",function(formatField){return{restrict:"A",scope:{formatDate:"="},link:function($scope){$scope.content=$scope.formatDate,$scope.$watch("formatDate.lineValue",function(){$scope.content.lineValue&&$scope.content.lineValue.length>0&&($scope.content.lineValue="pontos"==$scope.content.type?formatField.pontos($scope.content.lineValue):"moeda"==$scope.content.type?formatField.moeda($scope.content.lineValue,$scope.content.symbol):formatField.olds($scope.content.lineValue,$scope.content.type))})}}}]),directives.directive("viewConditional",["$filter",function($filter){return{restrict:"A",scope:{viewConditional:"=",viewLine:"="},link:function($scope){$scope.btns=angular.copy($scope.viewConditional);var insertDisabled=function(cond){$scope.btns.icon=$scope.btns.icon+" disabled",$scope.btns.disabled=cond.disabled,$scope.btns.hide=cond.hide,$scope.viewConditional=$scope.btns},filterConditional=function(fields,conditional){var filter=$filter("filter")(fields,conditional.name,!0);if(filter=filter.length>0?filter[0]:filter,conditional.obs&&conditional.obs.captureparameter){for(var filterParameter=[],m=0;m<conditional.obs.captureparameter.length;m++){var parameter=conditional.obs.captureparameter[m],filterCapture=$filter("filter")(fields,parameter,!0)[0];filterCapture?filterParameter.push(filter):""}if(filterParameter.length==conditional.obs.captureparameter.length){var filterText;conditional.obs.textparameter&&(filterText=$filter("filter")(fields,conditional.obs.textparameter,!0)[0]),$scope.btns.information=filterText?filterText.value:conditional.obs.text}}filter&&(conditional.value?(conditional.value==filter.value||conditional.value==filter.alias)&&insertDisabled(conditional):filter.lineValue||insertDisabled(conditional))},conditionals=$scope.btns.viewconditional;if(conditionals&&$scope.viewLine)for(var i=0;i<conditionals.length;i++){var conditional=conditionals[i];if(conditional.searchParameter){if(!$scope.viewLine.field)if($scope.viewLine.length)for(var l=0;l<$scope.viewLine.length;l++)filterConditional($scope.viewLine[l],conditional);else angular.forEach($scope.viewLine,function(index,val){if(val==conditional.searchParameter)if("footer"==val||"header"==val)for(var j=0;j<index.length;j++)filterConditional(index[j].field,conditional);else filterConditional(index,conditional)})}else if($scope.viewLine.field)filterConditional($scope.viewLine.field,conditional);else if($scope.viewLine.length>0)for(var m=0;m<$scope.viewLine.length;m++)for(var viewForm=$scope.viewLine[m].form,l=0;l<viewForm.length;l++)filterConditional(viewForm[l].campos,conditional)}$scope.viewConditinal=$scope.btns}}}]),directives.directive("btnOpenmodal",["$rootScope","modalCall","defaultServices","authServices",function($rootScope,modalCall,defaultServices,authServices){return{restrict:"A",scope:{modalScope:"=",modalDetail:"="},link:function($scope,$elm){var open=function(){$scope.formDetail&&(objModal.form=$scope.formDetail),objModal.issaveform||($rootScope.objClicked=$scope.formDetail?$scope.formDetail:$scope.formScope.captureobj?$scope.formScope:""),$scope.$apply(function(){if(objModal.issaveform){var fn=eval("defaultServices."+objModal.name);fn(objModal,function(data){"Ok"!=data.response.status?defaultServices.errorForm(objModal.form,data):($rootScope.formPrimary=objModal,modalCall.open($scope,objModal.url))})}else if(objModal.isvalidform){var valid=defaultServices.captureFields(objModal.form);"Ok"!=valid.response.status?defaultServices.errorForm(objModal.form,valid):($rootScope.formPrimary=objModal,modalCall.open($scope,objModal.url))}else $rootScope.formPrimary=objModal,modalCall.open($scope,objModal.url)})};if($scope.modalScope)var objModal=$scope.modalScope.detailopen?$scope.modalScope.detailopen:$scope.modalScope;$scope.$watch("modalDetail.dataUpdate",function(){$scope.formScope=$scope.modalScope,$scope.formDetail=$scope.modalDetail,objModal=$scope.formScope}),objModal.openmodal&&$elm.bind("click",function(){objModal.openmodalLogin?$rootScope.user?open():$scope.$apply(function(){authServices.logout("",!0)}):open()})}}}]),directives.directive("activeClickFocusRemove",function(){return{restrict:"A",link:function($scope,$elm){$elm.on("click",function(){return $elm.hasClass("active")?$elm.removeClass("active"):$elm.addClass("active")}).on("focusout",function(){$elm.removeClass("active")})}}}),directives.filter("startFrom",function(){return function(input,start){return input?(start=+start,input.slice(start)):void 0}});var app=angular.module("app",["angulartics","angulartics.google.analytics","ngStorage","directives","ui.bootstrap","ui.mask","ngRoute","ngCookies","ngSanitize","reCAPTCHA","external"]);app.constant("baseUrls",{directorys:{app:"app/",pages:"app/pages/",modals:"app/pages/modals/",partials:"app/pages/partials/",templates:{bootstrap:"app/pages/template/bootstrap/",app:"app/pages/template/"},images:"assets/images/"}}),app.config(function($routeProvider,$locationProvider,$httpProvider,$analyticsProvider,servicesConfig,reCAPTCHAProvider){window.history&&window.history.pushState&&$locationProvider.html5Mode(servicesConfig.ambienteProd?!0:!1);var urlIndex,layoutLinks=servicesConfig.user.layout.links;urlIndex=layoutLinks.login&&layoutLinks.login.pagedefault?layoutLinks.login.href:layoutLinks.index.href,$routeProvider.when("/",{redirectTo:urlIndex,access:{requiredLogin:!1}}).otherwise({redirectTo:urlIndex,access:{requiredLogin:!1}}),delete $httpProvider.defaults.headers.common["X-Requested-With"],$httpProvider.defaults.withCredentials=!1,$httpProvider.interceptors.push("sessionInjector"),reCAPTCHAProvider.setPublicKey(servicesConfig.captcha.sitekey),reCAPTCHAProvider.setOptions({theme:"clean",lang:"pt"})}),app.run(function($rootScope,$location,$localStorage,$sessionStorage,servicesConfig,baseUrls,$http,urlafterlogin){$rootScope.servicesConfig=servicesConfig,$rootScope.links=servicesConfig.user.links,$rootScope.site=servicesConfig.user,$rootScope.headerPartial=baseUrls.directorys.partials+"headerApp.html",$rootScope.footerPartial=baseUrls.directorys.partials+"footerApp.html",$rootScope.$on("$routeChangeStart",function(event,nextRoute){var urlLocation,layoutLinks=servicesConfig.user.layout.links;
$localStorage.token&&($http.defaults.headers.common.token=$localStorage.token),$localStorage.login?$location.url()==layoutLinks.login.href&&(urlLocation=layoutLinks.index.href,$location.path(urlLocation)):nextRoute.access.requiredLogin&&($location.url()!=layoutLinks.login.href&&urlafterlogin.parameter(layoutLinks),$sessionStorage.urlafterlogin?layoutLinks.login&&(urlLocation=layoutLinks.login.href):urlLocation=layoutLinks.login&&layoutLinks.login.pagedefault?layoutLinks.login.href:layoutLinks.index.href,$location.path(urlLocation))})}),app.filter("trustAsResourceUrl",["$sce",function($sce){return function(val){return $sce.trustAsResourceUrl(val)}}]),app.filter("closenav",["$localStorage",function($localStorage){return function(nav){var navArray=[];return nav.filter(function(element){element.close?$localStorage.user?navArray.push(element):!1:navArray.push(element)}),navArray}}]),app.filter("hideShow",[function(){return function(val){return val.filter(function(element){return!element.defaultHidden})}}]),app.factory("urlafterlogin",["$location","$sessionStorage","urlSetParameter",function($location,$sessionStorage,urlSetParameter){var urlafterlogin={parameter:function(layoutLinks){angular.forEach(layoutLinks,function(index,value){var urlCurrent,captureurlParameter=index.href.split(":parameter");if(captureurlParameter.length>1){for(var i=0;i<captureurlParameter.length-1;i++){var setParam=urlSetParameter.parameter(captureurlParameter[i]);urlCurrent=urlCurrent?urlCurrent.replace(setParam,"parameter"):$location.url().replace(setParam,"parameter")}urlCurrent&&index.href==urlCurrent&&($sessionStorage.urlafterlogin=value,$sessionStorage.urlafterloginParameter=urlCurrent,$sessionStorage.urlafterloginOrigin=$location.url())}else index.href==$location.url()&&($sessionStorage.urlafterlogin=value)})}};return urlafterlogin}]),app.factory("urlSetParameter",["$window",function($window){var urlSetParameter={parameter:function(parameter){var url=$window.location.hash.split("#")[1];url=$window.location.hash?$window.location.hash.split("#")[1]:$window.location.pathname.split("/")[1];var re=new RegExp(parameter+":","g"),setparameter=url.split(re)[1];return setparameter?setparameter=setparameter.split("/")[0]:"",setparameter}};return urlSetParameter}]),app.factory("colorModified",function(){return{modified:function(hex,percent){var hex=hex.replace(/^\s*#|\s*$/g,"");3==hex.length&&(hex=hex.replace(/(.)/g,"$1$1"));var r=parseInt(hex.substr(0,2),16),g=parseInt(hex.substr(2,2),16),b=parseInt(hex.substr(4,2),16);return"#"+(0|256+r+(256-r)*percent/100).toString(16).substr(1)+(0|256+g+(256-g)*percent/100).toString(16).substr(1)+(0|256+b+(256-b)*percent/100).toString(16).substr(1)}}}),app.factory("breakParam",[function(){var breakParam={breaks:function(obj,parameter,nocopy){var objCapture=[];if(parameter)for(var i=0;i<parameter.length;i++)angular.forEach(obj,function(index,val){var insert=!1;val!=parameter[i]||insert||(insert=!0,objCapture.push(nocopy?index:angular.copy(index)))});return objCapture}};return breakParam}]),app.factory("redirect",["$window","$location","servicesConfig","urlSetParameter","$rootScope",function($window,$location,servicesConfig,urlSetParameter,$rootScope){var redirect={url:function(page,btn,urlAfterLogin){var redirectParameter=function(url){var href=url.href,allParameters=[],captureurlParameter=href.split(":parameter"),verificParameter=captureurlParameter[0].split("/");verificParameter.length>2&&(captureurlParameter[0]="/"+verificParameter[verificParameter.length-1]);var urlCurrent;if(captureurlParameter.length>1){for(var i=0;i<captureurlParameter.length-1;i++){var parameterThis=captureurlParameter[i],setParam=urlSetParameter.parameter(parameterThis);if(setParam&&"parameter"!=setParam){var sethref=urlCurrent?urlCurrent:href;urlCurrent=sethref.replace(parameterThis+":parameter",parameterThis+":"+setParam),allParameters.push("ok")}}return $location.path(captureurlParameter.length-1==allParameters.length?urlCurrent:url.hrefDefault)}return $location.path(href)};return btn&&"return"==btn.url?($rootScope.objClicked="",$rootScope.formPrimary="",$window.history.back(),!1):void angular.forEach(servicesConfig.user.layout.links,function(index,value){var validPage=page?value==page:btn&&btn.name?btn.name:!1;if(validPage)if(btn){if(btn.urlset){index.hreforigin?"":index.hreforigin=angular.copy(index.href);for(var constructionUrlDestination,objBtn,allParameters=[],captureurlParameter=index.href.split(":parameter"),i=0;i<btn.urlset.length;i++){var urlset=btn.urlset[i],re=new RegExp(urlset.parameter+":parameter","g");if(constructionUrlDestination||(constructionUrlDestination=index.hreforigin),objBtn=0==urlset.setvalue?0:btn[urlset.setvalue]?btn[urlset.setvalue]:btn.form[urlset.setvalue],urlset.arrayset)if(0==objBtn)allParameters.push("ok");else for(var i=0;i<objBtn.length;i++){var objArr=objBtn[i];objArr[urlset.arrayset.param]==urlset.arrayset.value&&(allParameters.push("ok"),objBtn=objArr[urlset.arrayset.set])}else allParameters.push("ok");constructionUrlDestination=constructionUrlDestination.replace(re,urlset.parameter+":"+objBtn)}var urldestination;return urldestination=allParameters.length==captureurlParameter.length-1?constructionUrlDestination:index.hrefDefault,$location.path(urldestination)}redirectParameter(index)}else if(urlAfterLogin){if(index.href==urlAfterLogin.parameters)return $location.path(urlAfterLogin.urlorigin)}else redirectParameter(index)})}};return redirect}]),app.factory("interactionField",["defaultServices","modalCall","$rootScope",function(defaultServices,modalCall){var interactionField={interaction:function(form,interaction){var result,fieldsValid=[];return defaultServices.loopFiedsForm(form,function(data){for(var j=0;j<interaction.fields.length;j++){var fiedlInteraction=interaction.fields[j];if(data.name==fiedlInteraction&&data.lineValue&&fieldsValid.push(data),data.name==interaction.field)if(result=angular.copy(data),fieldsValid.length==interaction.fields.length)switch(interaction.interaction){case"disabled":result.disabled=!0;break;case"enable":result.disabled=!1;break;case"hide":result.hide=!0;break;case"show":result.hide=!1;break;case"openmodal":defaultServices.insertFormsaved(interaction.fields,form,form),modalCall.open(form,interaction.url)}else{var contentDependece=!1;switch(defaultServices.loopFiedsForm(form,function(dataInteraction){contentDependece||dataInteraction.name==fiedlInteraction&&(dataInteraction.defaultHidden||(contentDependece=!0))}),interaction.interaction){case"disabled":result.disabled=contentDependece?!1:!0;break;case"enable":result.disabled=contentDependece?!0:!1;break;case"hide":result.hide=contentDependece?!1:!0;break;case"show":result.hide=contentDependece?!0:!1}}}}),result?result:void 0}};return interactionField}]),app.factory("linkLocation",["redirect","defaultServices","modalCall","$rootScope","callServiceField","$location",function(redirect,defaultServices,modalCall,$rootScope,callServiceField,$location){var linkLocation={location:function(btn,scopeRoot,form,callback){var href=$(btn).attr("href"),fn,link,urlService,modalValid=!1;if(form?btn.form=form:"",form&&form.required&&form.tplform&&!form.tplform.$valid)return btn.form.invalid=!0,!1;var callFn=function(){fn=eval("defaultServices."+urlService),callback?fn(btn,callback):fn(btn)};if(btn.captureline&&($rootScope.objClicked=form?form:{},$rootScope.objClicked.formFieldHide=btn.formFieldHide),href&&"{"==href[0]){if(href=href.split(","),link=href[0],link=link.split("{")[1],link=link.split("}")[0],href[1]){var parameter=href[1].split("}")[0];parameter=parameter.replace(" ",""),"modal"==parameter&&(modalValid=!0)}modalValid?modalCall.open(btn,link):scopeRoot.$apply(function(){$rootScope.mainMsgs&&($rootScope.mainMsgs.keep=!1),redirect.url(link)})}btn.func?scopeRoot(btn):btn.filter?(urlService=btn.name,callFn()):btn.urldirect?$location.path(btn.url):btn.service||form?btn.service?"button"==btn.type&&"button"==btn.nameTpl&&btn.size?btn.service.call&&form&&callServiceField.callService(btn.service.call,form):(btn.service.call?urlService=btn.service.call.objresult:btn.service&&(urlService=btn.name),urlService?callFn():redirect.url(btn.url,btn)):(urlService=btn.name,form&&(form.service&&urlService?callFn():redirect.url(btn.url,btn))):($rootScope.mainMsgs&&($rootScope.mainMsgs.keep=!1),redirect.url(btn.url,btn))}};return linkLocation}]),app.factory("modalCall",["$rootScope","baseUrls","$modal",function($rootScope,baseUrls,$modal){var modalCall={open:function(scopeForm,refModal){var scope=angular.copy(scopeForm);if(angular.forEach($rootScope.site.layout.modals,function(index,value){value==refModal&&(scope.modal=index)}),scope.modalScope&&scope.modalScope.formdisabled&&(scope.modal.content.formdisabled=scope.modalScope.formdisabled),scope.modal){scope.modal.content.msgs="";{var copyModal=angular.copy(scope.modal);$modal.open({templateUrl:baseUrls.directorys.modals+"modal.html",controller:scope.modal.ctrl,size:scope.modal.size,windowClass:"modal "+scope.modal.content.classe,backdrop:"static",keyboard:!1,resolve:{tplModal:function(){return copyModal}}})}}}};return modalCall}]),app.factory("callServiceField",["defaultServices","$timeout","resultScope",function(defaultServices,$timeout,resultScope){var callField={callService:function(eventField,form){if(eventField.objresult){var fn=eval("defaultServices."+eventField.objresult);eventField.form=form,$timeout(function(){fn(eventField,function(data){var callback=function(){if(eventField.edit)for(var j=0;j<form.detail.length;j++)for(var detailForm=form.detail[j],l=0;l<detailForm.form.length;l++)for(var formCampos=detailForm.form[l].campos,k=0;k<formCampos.length;k++)eventField.urls||url?resultScope.format(data.result,formCampos[k],eventField):resultScope.format(data.result,formCampos[k],eventField)};data.msgs?"Fail"!=data.msgs.response.status?callback():form.msgs=data.msgs:callback()})},200)}}};return callField}]),app.factory("resultScope",["$filter","formatField","breakParam","$rootScope","defaultServices",function($filter,formatField,breakParam,$rootScope,defaultServices){var resultScope={format:function(result,scopeContent,scopeForm){if(scopeContent.captureparameter){var captureRoot=defaultServices.captureRoot(scopeForm.service?scopeForm.service:scopeForm.url||scopeForm.urls?scopeForm:"",scopeContent);scopeContent.lineValue=captureRoot&&captureRoot.value?captureRoot.value:scopeContent.defaultresult?scopeContent.defaultresult:""}if(result&&result.line)for(var i=0;i<result.line.length;i++){var line=result.line[i];if(line.field){var filterValue=$filter("filter")(line.field,scopeContent.name,!0)[0];if(filterValue){switch(angular.forEach(filterValue,function(filterIndex,filterVal){null!=filterIndex&&angular.forEach(scopeContent,function(contentIndex,contentVal){var ignore=!1;if(filterValue.ignoreParams)for(var j=0;j<filterValue.ignoreParams.length;j++){var ignoreParam=filterValue.ignoreParams[j];(ignoreParam==contentIndex||"ignoreParams"==contentIndex)&&(ignore=!0)}ignore||(filterVal==contentVal&&scopeContent.addParamsResult?"hidden"!=filterVal&&(scopeContent[filterVal]=filterIndex):("hidden"!=filterVal||scopeContent.ignoreHidden||scopeContent[filterVal]||(scopeContent.defaultHidden=filterIndex),scopeContent.addParamsResult&&("alias"==filterVal?scopeContent.labelName||(scopeContent.labelName=filterIndex):scopeContent[filterVal]||"hidden"!=filterVal&&(scopeContent[filterVal]=filterIndex))))})}),scopeContent.type){case"select":if(scopeContent.options||(scopeContent.options={obj:filterValue.list}),filterValue.value){var filterOptions=$filter("filter")(scopeContent.options.obj,filterValue.value,!0);filterOptions&&(scopeContent.lineValue=filterOptions[0])}else scopeContent.optionsSelecione=!0;break;case"date":scopeContent.lineValue=formatField.date(filterValue.value,"inputtext"==scopeContent.nameTpl?!0:!1);break;case"checkbox":scopeContent.lineValue=filterValue.value,scopeContent.checked="S"==scopeContent.lineValue?!0:!1;break;default:scopeContent.lineValue=filterValue.value}scopeContent.lineValue&&(scopeContent.invalid=!1)}}}return scopeContent}};return resultScope}]),String.prototype.splice=function(idx,rem,s){return this.slice(0,idx)+s+this.slice(idx+Math.abs(rem))},app.factory("formatField",["$filter",function(){var format={date:function(date,inverter,clear){angular.isObject(date)&&(date=date[0]),date=date.replace(/[\.]/g,"");var dateSplit=date.split(" ")[0];return dateSplit&&(isIE()&&(inverter=!0),!clear&&inverter&&(dateSplit=dateSplit.split("-"),dateSplit=dateSplit.length>1?dateSplit[2]+"/"+dateSplit[1]+"/"+dateSplit[0]:dateSplit[0]),clear&&!inverter&&(dateSplit=dateSplit.split("/"),1==dateSplit.length&&(dateSplit=dateSplit[0].split("-")),dateSplit=dateSplit[2]+dateSplit[1]+dateSplit[0])),dateSplit},moeda:function(val,symbol){if(val=val.replace(/[\R$ ]/g,""),val=val.replace(/[\,]/g,"."),!isNaN(val.replace(/[\.]/g,""))){var cents,centsPoint=val.split(".");if(centsPoint.length>1){for(var lastCentsPoint=centsPoint[centsPoint.length-1],j=0;j<centsPoint.length-1;j++)0==j?val=centsPoint[j]:val+=centsPoint[j];lastCentsPoint.length<3&&(centsPoint=centsPoint[centsPoint.length-1],cents=1==centsPoint.length?centsPoint+"0":centsPoint)}val.length>2&&(val=val.replace(/([0-9]{3})$/g,3==val.length?"$1":".$1")),val.length>6&&(val=val.replace(/([0-9]{3}).([0-9]{3}$)/g,7==val.length?"$1.$2":".$1.$2")),val.length>10&&(val=val.replace(/([0-9]{3}).([0-9]{3}).([0-9]{3}$)/g,11==val.length?"$1.$2.$3":".$1.$2.$3")),val.length>14&&(val=val.replace(/([0-9]{3}).([0-9]{3}).([0-9]{3}).([0-9]{3}$)/g,15==val.length?"$1.$2.$3.$4":".$1.$2.$3.$4")),val.length>18&&(val=val.replace(/([0-9]{3}).([0-9]{3}).([0-9]{3}).([0-9]{3}).([0-9]{3}$)/g,19==val.length?"1$1.$2.$3.$4.$5":".$1.$2.$3.$4.$5"));var result=cents?val+","+cents:val+",00";return symbol?symbol+" "+result:result}},pontos:function(val){var valSplit=val.split(".");return valSplit[1]&&(val=valSplit[1].length>2?val.replace(/[\.]/g,""):valSplit[0]),val.length>2&&(val=val.replace(/([0-9]{3})$/g,3==val.length?"$1":".$1")),val.length>6&&(val=val.replace(/([0-9]{3}).([0-9]{3}$)/g,7==val.length?"$1.$2":".$1.$2")),val.length>10&&(val=val.replace(/([0-9]{3}).([0-9]{3}).([0-9]{3}$)/g,11==val.length?"$1.$2.$3":".$1.$2.$3")),val.length>14&&(val=val.replace(/([0-9]{3}).([0-9]{3}).([0-9]{3}).([0-9]{3}$)/g,15==val.length?"$1.$2.$3.$4":".$1.$2.$3.$4")),val.length>18&&(val=val.replace(/([0-9]{3}).([0-9]{3}).([0-9]{3}).([0-9]{3}).([0-9]{3}$)/g,19==val.length?"$1.$2.$3.$4.$5":".$1.$2.$3.$4.$5")),val},olds:function(val,type){switch(type){case"cpf":val=val.replace(/[\.-]/g,"");var format=val.replace(/([0-9]{3})([0-9]{3})([0-9]{2}$)/g,".$1.$2-$3");val=format;break;case"tel":var format;val=val.replace(/[\() ]/g,""),format=11==val.length?val.replace(/([0-9]{2})([0-9]{9}$)/g,"($1) $2"):val.replace(/([0-9]{2})([0-9]{8}$)/g,"($1) $2"),val=format;break;case"rg":val=val.replace(/[\.-]/g,"");var format=val.replace(/([0-9]{2})([0-9]{3})([0-9]{3})([0-9]{1}$)/g,"$1.$2.$3-$4");val=format;break;default:return val}return val}};return format}]),app.factory("activeNavigation",["$rootScope","servicesConfig","urlSetParameter","$filter",function($rootScope,servicesConfig,urlSetParameter,$filter){var activeNavigation={active:function(nav){var layoutLinks,setparameterurl;angular.forEach(servicesConfig.user.layout.links,function(index){var urlOrigin=index.href.split(":")[0];urlOrigin===$rootScope.activeNavCurrent&&(layoutLinks=index)});var parameternav="ref";if(layoutLinks)switch(nav.type){case"navinterno":return nav.navinternaactiveaut?(setparameterurl=urlSetParameter.parameter(nav.navinternaactiveaut.parameterurl),parameternav=nav.navinternaactiveaut.parameterfiled,nav[parameternav]===setparameterurl?"active":""):nav[parameternav]===layoutLinks.navinternaactive?"active":"";case"nav":return nav.navactiveaut?(setparameterurl=urlSetParameter.parameter(nav.navactiveaut.parameterurl),parameternav=nav.navactiveaut.parameterfiled,nav[parameternav]===setparameterurl?"active":""):nav[parameternav]===layoutLinks.navactive?"active":"";case"menu":if(nav.menuactiveaut){if(nav.menuactiveaut.length){for(var menuactive=[],i=0;i<nav.menuactiveaut.length;i++){var paramsActive=nav.menuactiveaut[i];if(setparameterurl=urlSetParameter.parameter(paramsActive.parameterurl),parameternav=paramsActive.parameterfiled,nav[parameternav]||0==parameternav)if("params"==paramsActive.parameterfiled){var captureParam=$filter("filter")(nav[parameternav],{id:paramsActive.paramsName},!0)[0];captureParam&&captureParam.value===setparameterurl&&menuactive.push("ok")}else 0==parameternav?parameternav===Number(setparameterurl)&&menuactive.push("ok"):nav[parameternav]===setparameterurl&&menuactive.push("ok")}return nav.menuactiveaut.length==menuactive.length?!0:!1}return parameternav=nav.menuactiveaut.parameterfiled,setparameterurl=urlSetParameter.parameter(nav.menuactiveaut.parameterurl),nav[parameternav]===setparameterurl?!0:!1}return nav[parameternav]===layoutLinks.menuactive?!0:!1;default:return!1}}};return activeNavigation}]),app.factory("authFn",["$rootScope","$window","authServices","defaultServices","breakParam","redirect","linkLocation","activeNavigation","$localStorage","$location",function($rootScope,$window,authServices,defaultServices,breakParam,redirect,linkLocation,activeNavigation,$localStorage,$location){var authFn={auth:function($scope,layoutLinks){if($("body").animate({scrollTop:0},"slow"),layoutLinks.oldHref&&$location.path()==layoutLinks.oldHref&&redirect.url(layoutLinks.href,layoutLinks),$localStorage.setPagLogin&&"login"==layoutLinks.name&&$rootScope.site.layout.links[$localStorage.setPagLogin]){var pageRedirect=$rootScope.site.layout.links[$localStorage.setPagLogin];return redirect.url(pageRedirect.name,pageRedirect),!1}var url;url=$window.location.hash?$window.location.hash.split("#")[1]:$window.location.pathname.split("/")[1],url=url.split(":")[0],$rootScope.activeNavCurrent=url,$rootScope.pageServer={layout:layoutLinks,externalServer:$scope.pageServer},authServices.authenticate(layoutLinks.pageClose,$scope.pageServer.content,function(){var pageContent;if($scope.pageServer.content&&(pageContent=angular.copy($scope.pageServer.content.partial?breakParam.breaks($rootScope.site.layout.partials,$scope.pageServer.content.partial)[0]:$scope.pageServer.content)),$scope.pageServer.setPagLogin&&($localStorage.setPagLogin=$scope.pageServer.setPagLogin),$rootScope.pag=angular.copy($scope.pageServer.classe),$rootScope.pageCurrent={},$scope.pageServer.hide&&($rootScope.pageCurrent.hideheader=$scope.pageServer.hide.header,$rootScope.pageCurrent.headerlogin=$scope.pageServer.hide.headerlogin,$rootScope.pageCurrent.hidemenu=$scope.pageServer.hide.menu,$rootScope.pageCurrent.hidefooter=$scope.pageServer.hide.footer),$rootScope.pageCurrent.header=angular.copy($rootScope.site.layout.header),$rootScope.pageCurrent.footer=angular.copy($rootScope.site.layout.footer),$rootScope.pageCurrent.header.user){var user=$rootScope.pageCurrent.header.user;user.titleref&&(user.title=breakParam.breaks($rootScope.user,[user.titleref])[0])}if($rootScope.pageCurrent.header.login&&($scope.pageServer.hide?$scope.pageServer.hide.headerlogin||($rootScope.pageCurrent.header.login=angular.copy(breakParam.breaks($rootScope.site.layout.partials,["login"]))):$rootScope.pageCurrent.header.login=angular.copy(breakParam.breaks($rootScope.site.layout.partials,["login"]))),$scope.pageServer.title&&($rootScope.pageCurrent.pagTitle=angular.copy($scope.pageServer.title)),$scope.pageServer.btnReturn&&$scope.pageServer.btnReturn.visibled&&($rootScope.pageCurrent.btnReturn=angular.copy($scope.pageServer.btnReturn)),$rootScope.pageCurrent.menu=angular.copy(layoutLinks.pageClose?breakParam.breaks($rootScope.site.layout.partials,$rootScope.user?$scope.pageServer.menu:!$rootScope.pageCurrent.header.login&&$rootScope.site.layout.menu.login?["login"]:""):breakParam.breaks($rootScope.site.layout.partials,$scope.pageServer.menu)),$rootScope.pageCurrent.nav=angular.copy(breakParam.breaks($rootScope.site.layout.partials,$scope.pageServer.nav)),$rootScope.pageCurrent.banner=angular.copy(breakParam.breaks($rootScope.site.layout.banners,$scope.pageServer.banner)),pageContent){if($rootScope.pageCurrent.main=[],$rootScope.mainMsgs){var expired;$rootScope.mainMsgs.response&&(expired=$rootScope.mainMsgs.response.expired),expired||($rootScope.mainMsgs=$rootScope.mainMsgs.keep?$rootScope.mainMsgs:"",$rootScope.mainMsgs&&($rootScope.mainMsgs.errorContent=!1))}if(pageContent.service)if(pageContent.service.call){var fn=eval("defaultServices."+pageContent.service.call.objresult);fn(pageContent,function(){pageContent.detail&&(pageContent.formdefault=angular.copy(pageContent.detail)),$scope.content=pageContent,$rootScope.pageCurrent.main[0]=pageContent})}else $scope.content=pageContent,$rootScope.pageCurrent.main[0]=pageContent;else $scope.content=pageContent,pageContent.length>1?$rootScope.pageCurrent.main=pageContent:$rootScope.pageCurrent.main[0]=pageContent;"tpl-form"==pageContent.tpl&&(pageContent.formdefault=angular.copy(pageContent.detail),$scope.content=pageContent,$rootScope.pageCurrent.main[0]=pageContent)}return $scope.pageServer.redirectauth&&$localStorage.user&&redirect.url(1==$scope.pageServer.redirectauth?$scope.pageServer.redirectlogin:$scope.pageServer.redirectauth),$scope.location=function(btn,form){var scopeRoot="$scope.$parent";if(btn.func){var fn=eval(scopeRoot+"."+btn.func);linkLocation.location(btn,fn,form)}else linkLocation.location(btn,scopeRoot,form)},$scope.activeNav=function(nav){return activeNavigation.active(nav)},$scope})}};return authFn}]);var internalCtrl=function($scope,$rootScope,$localStorage,$sessionStorage,$location,authServices,defaultServices,redirect,authFn,activeNavigation,reCAPTCHA,$timeout){$scope.menuHeader=[{title:"Sair",href:"",click:"logout"}],$scope.navlocation=function(nav){$rootScope.mainMsgs&&($rootScope.mainMsgs.keep=!1),$rootScope.pageCurrent={};var urldestination=$rootScope.pageServer.layout.hrefDefault?$rootScope.pageServer.layout.hrefDefault:$rootScope.pageServer.layout.href;if($location.path()==urldestination&&nav.url==$rootScope.pageServer.layout.name){var page={pageServer:$rootScope.pageServer.externalServer,pageClose:$rootScope.pageServer.layout.pageclose};$timeout(function(){authFn.auth(page,$rootScope.pageServer.layout)},100)}else redirect.url(nav.url,nav)},$rootScope.menuShow=!0,$rootScope.showhideMenu=function(){$rootScope.menuShow=$rootScope.menuShow?!1:!0},$scope.authNav=function(authentic){return authentic?$rootScope.user?!0:!1:!0},$scope.login=function(btn){var clearParam=function(){$scope.sendLogin=!1},formValid=defaultServices.captureFields(btn.form);if("Ok"!=formValid.response.status)return btn.form.msgs=formValid,clearParam(),!1;var currentLocation=$location.url();currentLocation=currentLocation.split("/")[1];var redirectLogin;redirectLogin=$sessionStorage.urlafterlogin?$sessionStorage.urlafterloginParameter?{urlafter:$sessionStorage.urlafterlogin,parameters:$sessionStorage.urlafterloginParameter,urlorigin:$sessionStorage.urlafterloginOrigin}:$sessionStorage.urlafterlogin:$scope.pageServer.redirectlogin?$scope.pageServer.redirectlogin:btn.url,authServices.login(formValid.response.content,redirectLogin,currentLocation).success(function(){redirectLogin.parameters?"not"!=redirectLogin.urlafter&&currentLocation==redirectLogin.urlafter&&authFn.auth($scope,!0):"not"!=redirectLogin&&currentLocation==redirectLogin&&authFn.auth($scope,!0),delete $sessionStorage.urlafterlogin,delete $sessionStorage.urlafterloginParameter,delete $sessionStorage.urlafterloginOrigin}).error(function(data){btn.form.msgs=data,clearParam()})},$scope.logout=function(){authServices.logout()}},appCtrl=function(){};